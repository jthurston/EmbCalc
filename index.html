<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Embroidery price calculator for custom embroidery projects">
    <title>EmbCalc - Embroidery Price Calculator</title>
    
    <!-- Modern CSS Framework or Custom CSS -->
    <link rel="stylesheet" href="css/modern-style.css">
    
    <!-- Modern JavaScript (ES6+) -->
    <script type="module" src="js/embcalc-modern.js"></script>
</head>

<body>
    <header>
        <h1>EmbCalc</h1>
        <nav>
            <button id="settings-btn" aria-label="Open Settings">⚙️ Settings</button>
        </nav>
    </header>

    <main>
        <div class="calculator-container">
            <section class="calculator-form" aria-labelledby="calc-heading">
                <h2 id="calc-heading">Embroidery Price Calculator</h2>
                
                <form id="embroidery-form" novalidate>
                    <div class="form-group">
                        <label for="stitches-input">Number of Stitches *</label>
                        <input 
                            type="number" 
                            id="stitches-input" 
                            name="stitches"
                            min="0"
                            step="1"
                            required
                            aria-describedby="stitches-help"
                            placeholder="e.g., 10000"
                        >
                        <small id="stitches-help">Total stitch count for the design</small>
                        <span class="error-message" id="stitches-error" role="alert"></span>
                    </div>

                    <div class="form-group">
                        <label for="items-input">Number of Items *</label>
                        <input 
                            type="number" 
                            id="items-input" 
                            name="items"
                            min="1"
                            step="1"
                            value="1"
                            required
                            aria-describedby="items-help"
                        >
                        <small id="items-help">How many items to embroider</small>
                        <span class="error-message" id="items-error" role="alert"></span>
                    </div>

                    <div class="form-group">
                        <label for="appliques-input">Number of Appliqués</label>
                        <input 
                            type="number" 
                            id="appliques-input" 
                            name="appliques"
                            min="0"
                            step="1"
                            placeholder="0"
                            aria-describedby="appliques-help"
                        >
                        <small id="appliques-help">Optional: Number of appliqué pieces</small>
                    </div>

                    <div class="form-group">
                        <label for="blank-cost-input">Blank Item Cost</label>
                        <div class="input-wrapper">
                            <span class="currency-symbol">$</span>
                            <input 
                                type="number" 
                                id="blank-cost-input" 
                                name="blankCost"
                                min="0"
                                step="0.01"
                                placeholder="0.00"
                                aria-describedby="blank-cost-help"
                            >
                        </div>
                        <small id="blank-cost-help">Cost per blank item (shirt, hat, etc.)</small>
                    </div>

                    <div class="form-group">
                        <label for="design-cost-input">Design/Setup Cost</label>
                        <div class="input-wrapper">
                            <span class="currency-symbol">$</span>
                            <input 
                                type="number" 
                                id="design-cost-input" 
                                name="designCost"
                                min="0"
                                step="0.01"
                                placeholder="0.00"
                                aria-describedby="design-cost-help"
                            >
                        </div>
                        <small id="design-cost-help">One-time design or setup fee</small>
                    </div>               
                </form>
            </section>

            <section class="results" id="results-section" aria-live="polite" style="display: none;">
                <h3>Pricing Breakdown</h3>
                
                <div class="price-summary">
                    <div class="total-price">
                        <span class="price-label">Price Per Item:</span>
                        <span class="price-amount" id="per-item-price">$0.00</span>
                    </div>
                    <div class="total-all">
                        <span class="price-label">Total for <span id="item-count">1</span> item(s):</span>
                        <span class="price-amount" id="total-price">$0.00</span>
                    </div>
                </div>

                <details class="breakdown-details">
                    <summary>View Detailed Breakdown</summary>
                    <dl class="price-breakdown">
                        <div class="breakdown-item">
                            <dt>Stitching Cost:</dt>
                            <dd>
                                <span id="stitch-count">0</span> stitches @ 
                                $<span id="stitch-rate">0.50</span> per 1,000 = 
                                $<span id="stitch-total">0.00</span>
                            </dd>
                        </div>
                        
                        <div class="breakdown-item" id="applique-breakdown" style="display: none;">
                            <dt>Appliqué Cost:</dt>
                            <dd>
                                <span id="applique-count">0</span> appliqués @ 
                                $<span id="applique-rate">1.00</span> each = 
                                $<span id="applique-total">0.00</span>
                            </dd>
                        </div>
                        
                        <div class="breakdown-item" id="blank-breakdown" style="display: none;">
                            <dt>Blank Item Cost:</dt>
                            <dd>$<span id="blank-price">0.00</span></dd>
                        </div>
                        
                        <div class="breakdown-item" id="insurance-breakdown" style="display: none;">
                            <dt>Blank Insurance:</dt>
                            <dd>
                                <span id="insurance-rate">10</span>% of blank cost = 
                                $<span id="insurance-total">0.00</span>
                            </dd>
                        </div>
                        
                        <div class="breakdown-item" id="design-breakdown" style="display: none;">
                            <dt>Design/Setup Cost:</dt>
                            <dd>$<span id="design-cost-display">0.00</span></dd>
                        </div>
                    </dl>
                </details>
            </section>
        </div>
    </main>

    <!-- Settings Modal -->
    <div class="modal" id="settings-modal" role="dialog" aria-labelledby="settings-title" aria-hidden="true">
        <div class="modal-content">
            <header class="modal-header">
                <h2 id="settings-title">Pricing Settings</h2>
                <button class="close-btn" aria-label="Close Settings">&times;</button>
            </header>
            
            <form id="settings-form">
                <div class="form-group">
                    <label for="stitch-rate-input">Cost per 1,000 Stitches</label>
                    <div class="input-wrapper">
                        <span class="currency-symbol">$</span>
                        <input 
                            type="number" 
                            id="stitch-rate-input"
                            min="0"
                            step="0.01"
                            value="0.50"
                        >
                    </div>
                </div>

                <div class="form-group">
                    <label for="applique-rate-input">Cost per Appliqué</label>
                    <div class="input-wrapper">
                        <span class="currency-symbol">$</span>
                        <input 
                            type="number" 
                            id="applique-rate-input"
                            min="0"
                            step="0.01"
                            value="1.00"
                        >
                    </div>
                </div>

                <div class="form-group">
                    <label for="insurance-rate-input">Blank Insurance Rate</label>
                    <div class="input-wrapper">
                        <input 
                            type="number" 
                            id="insurance-rate-input"
                            min="0"
                            max="100"
                            step="0.1"
                            value="10"
                        >
                        <span class="unit-symbol">%</span>
                    </div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="cancel-settings">Cancel</button>
                    <button type="submit" class="btn-primary">Save Settings</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Loading indicator -->
    <div class="loading" id="loading" style="display: none;" role="status" aria-label="Calculating...">
        <div class="spinner"></div>
        <span>Calculating...</span>
    </div>
</body>
</html>
